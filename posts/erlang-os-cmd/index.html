<!doctype html>

<html lang="en">

<head>
  <title>Notes</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="The HTML5 Herald" />
  <meta name="author" content="Venkatakumar Srinivasan" /><meta name="generator" content="Hugo 0.72.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" />
  <script src="https://kit.fontawesome.com/b76b73e8e8.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  <link rel="stylesheet" type="text/css" href="https://drvspw.github.io/css/styles.css" />
  <link rel="stylesheet" type="text/css" href="https://drvspw.github.io/css/syntax.css" /></head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://drvspw.github.io/">Notes</a>
            </h1>

      <ul id="social-media">
        
        
        
        <li><a href="https://twitter.com/_Im_Venkat"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
         
        <li><a href="https://www.linkedin.com/in/venkatakumar"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
         
        <li><a href="https://github.com/drvspw"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a></li>
           
      </ul>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="https://drvspw.github.io/">
                <i class="fa-li fa  fa-lg"></i><span>Home</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://drvspw.github.io/posts/">
                <i class="fa-li fa  fa-lg"></i><span>Posts</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://drvspw.github.io/categories/">
                <i class="fa-li fa  fa-lg"></i><span>Categories</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://drvspw.github.io/tags/">
                <i class="fa-li fa  fa-lg"></i><span>Tags</span>
            </a>
        </li>
        
    </ul>
</nav>

    <main>




<article>

    <h1>Erlang OS Cmd</h1>

    
        <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2020-06-06T23:06:36-05:00">Jun 6, 2020</time>
        </li>
        
        <li>
            Categories:
            <em>
                
                    
                    <a href="https://drvspw.github.io/categories/snippets">snippets</a>
                
            </em>
        </li>
        

        
        <li>
            <em>
                
                    
                    <a href="https://drvspw.github.io/tags/erlang">#erlang</a>
                
            </em>
        </li>
        

        <li>One minute read</li>
    </ul>
</aside>

    

    <div class="highlight"><pre class="chroma"><code class="language-erlang" data-lang="erlang"><span class="nf">os_cmd</span><span class="p">(</span><span class="nv">Command</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nv">Port</span> <span class="o">=</span> <span class="nb">open_port</span><span class="p">({</span><span class="nb">spawn</span><span class="p">,</span> <span class="nv">Command</span><span class="p">},</span> <span class="p">[</span><span class="n">stream</span><span class="p">,</span> <span class="n">in</span><span class="p">,</span> <span class="n">eof</span><span class="p">,</span> <span class="n">hide</span><span class="p">,</span> <span class="n">exit_status</span><span class="p">]),</span>
  <span class="n">capture_cmd_output</span><span class="p">(</span><span class="nv">Port</span><span class="p">,</span> <span class="p">[]).</span>

<span class="nf">capture_cmd_output</span><span class="p">(</span><span class="nv">Port</span><span class="p">,</span> <span class="nv">Sofar</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="k">receive</span>
    <span class="p">{</span><span class="nv">Port</span><span class="p">,</span> <span class="p">{</span><span class="n">data</span><span class="p">,</span> <span class="nv">Bytes</span><span class="p">}}</span> <span class="o">-&gt;</span>
      <span class="n">capture_cmd_output</span><span class="p">(</span><span class="nv">Port</span><span class="p">,</span> <span class="p">[</span><span class="nv">Sofar</span><span class="p">|</span><span class="nv">Bytes</span><span class="p">]);</span>

    <span class="p">{</span><span class="nv">Port</span><span class="p">,</span> <span class="n">eof</span><span class="p">}</span> <span class="o">-&gt;</span>
      <span class="nv">Port</span> <span class="o">!</span> <span class="p">{</span><span class="n">self</span><span class="p">(),</span> <span class="n">close</span><span class="p">},</span>
      <span class="k">receive</span>
        <span class="p">{</span><span class="nv">Port</span><span class="p">,</span> <span class="n">closed</span><span class="p">}</span> <span class="o">-&gt;</span>
          <span class="n">true</span>
      <span class="k">end</span><span class="p">,</span>
      <span class="k">receive</span>
        <span class="p">{</span><span class="n">&#39;EXIT&#39;</span><span class="p">,</span>  <span class="nv">Port</span><span class="p">,</span>  <span class="p">_}</span> <span class="o">-&gt;</span>
          <span class="n">ok</span>
      <span class="k">after</span> <span class="mi">1</span> <span class="o">-&gt;</span>              <span class="c">% force context switch
</span><span class="c"></span>          <span class="n">ok</span>
      <span class="k">end</span><span class="p">,</span>
      <span class="nv">ExitCode</span> <span class="o">=</span>
        <span class="k">receive</span>
          <span class="p">{</span><span class="nv">Port</span><span class="p">,</span> <span class="p">{</span><span class="n">exit_status</span><span class="p">,</span> <span class="nv">Code</span><span class="p">}}</span> <span class="o">-&gt;</span>
            <span class="nv">Code</span>
        <span class="k">end</span><span class="p">,</span>
      <span class="p">{</span><span class="nv">ExitCode</span><span class="p">,</span> <span class="nn">lists</span><span class="p">:</span><span class="nf">flatten</span><span class="p">(</span><span class="nv">Sofar</span><span class="p">)}</span>
  <span class="k">end</span><span class="p">.</span>
</code></pre></div>

</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://drvspw.github.io/posts/custom-rust-error/"><i class="fa fa-chevron-circle-left"></i> Custom Rust Error</a>
        </li>
        
        
    </ul>
</section>
    





</main>
    <footer>
        <h6>Copyright Â© 2020 - Venkatakumar Srinivasan |
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://drvspw.github.io/index.xml">Subscribe</a></h6>
    </footer>
</div>
<script src="https://drvspw.github.io/js/scripts.js"></script>

</body>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>



</html>
